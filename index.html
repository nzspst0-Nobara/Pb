<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boosting Premium Service</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ffb52c;
            --primary-glow: rgba(255, 181, 44, 0.3);
            --bg-dark: #0f1012;
            --card-bg: #18191b;
            --text-main: #e1e1e6;
            --success: #25d366;

            /* Variables para manejo dinámico de imágenes */
            --bg-img-bf6: none;
            --bg-img-fell: none;
            --bg-img-wow: none;
            --bg-img-poe2: none;
            --bg-img-wowtbc: none;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            margin: 0;
            min-height: 100vh;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            transition: background-image 0.5s ease;
        }

        /* Backgrounds usando variables controladas por JS */
        .bg-bf6 { background-image: linear-gradient(rgba(10,21,41,0.7), rgba(15,15,20,0.9)), var(--bg-img-bf6); }
        .bg-fell { background-image: linear-gradient(rgba(30,13,41,0.7), rgba(10,15,33,0.9)), var(--bg-img-fell); }
        .bg-wow_retail { background-image: linear-gradient(rgba(40,20,5,0.7), rgba(15,10,5,0.9)), var(--bg-img-wow); }
        .bg-wow_classic { background-image: linear-gradient(rgba(20,20,5,0.7), rgba(10,10,5,0.9)), var(--bg-img-wowc); }
        .bg-wow_tbc { background-image: linear-gradient(rgba(5, 40, 5, 0.7), rgba(5, 15, 5, 0.9)), var(--bg-img-wowtbc); }
        .bg-wow_mop { background-image: linear-gradient(rgba(5, 40, 5, 0.7), rgba(5, 15, 5, 0.9)), var(--bg-img-wowmop); }
        .bg-poe2 { background-image: linear-gradient(rgba(20,13,8,0.7), rgba(10,5,5,0.9)), var(--bg-img-poe2); }

        header {
            background: rgba(0, 0, 0, 0.95);
            padding: 20px;
            border-bottom: 2px solid var(--primary);
            box-shadow: 0 0 25px var(--primary-glow);
        }

        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1300px;
            margin: 0 auto;
            gap: 20px;
        }

        .logo {
            font-family: 'Orbitron';
            font-size: 1.8rem;
            color: var(--primary);
            letter-spacing: 4px;
            font-weight: 900;
        }

        .search-container { position: relative; flex: 1; max-width: 400px; }
        #service-search {
            width: 100%;
            background: #18191b;
            border: 1px solid #333;
            padding: 10px 15px 10px 40px;
            border-radius: 8px;
            color: white;
        }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #666; }

        /* Game Navigation */
        .game-nav {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 10px;
            padding: 25px 20px;
            max-width: 1300px;
            margin: 0 auto;
        }

        .game-card {
            position: relative;
            height: 90px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 12px;
            background-color: #1a1b1e;
            background-size: cover;
            background-position: center;
            border: 1px solid #333;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.3s;
            overflow: hidden;
            font-family: 'Orbitron';
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.75rem;
            color: white;
            z-index: 1;
            text-align: center;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.2) 100%);
            z-index: -1;
        }

        .game-card.active {
            border-color: var(--primary);
            box-shadow: 0 0 15px var(--primary-glow);
            transform: scale(1.05);
        }

        /* Layout */
        .main-container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 30px;
        }

        @media (max-width: 1100px) { .main-container { grid-template-columns: 1fr; } }

        .config-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        h2 {
            font-family: 'Orbitron';
            font-size: 1rem;
            color: var(--primary);
            border-left: 4px solid var(--primary);
            padding-left: 15px;
            margin-bottom: 20px;
        }

        /* Inputs & Buttons */
        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.7rem; color: #888; margin-bottom: 8px; text-transform: uppercase; font-weight: 800; }
        select, input {
            width: 100%;
            background: #0b0c0d;
            border: 1px solid #333;
            color: white;
            padding: 12px;
            border-radius: 8px;
            outline: none;
            box-sizing: border-box;
        }
        select:focus, input:focus { border-color: var(--primary); }

        .mode-selector { display: flex; gap: 10px; margin-bottom: 20px; }
        .mode-btn {
            flex: 1; padding: 12px; border: 1px solid #333; background: #000;
            color: #777; border-radius: 8px; cursor: pointer; font-family: 'Orbitron';
            font-size: 0.7rem; text-align: center; transition: 0.3s;
        }
        .mode-btn.active { border-color: var(--primary); color: white; background: rgba(255, 181, 44, 0.1); }

        /* Summary Card Improvements */
        .summary-card {
            background: #1c1d1f;
            border-radius: 20px;
            padding: 30px;
            border: 1px solid var(--primary);
            position: sticky;
            top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .order-details {
            background: rgba(0,0,0,0.3);
            border-radius: 12px;
            padding: 15px;
            margin: 20px 0;
            border: 1px solid #333;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            margin-bottom: 8px;
            color: #bbb;
        }

        .detail-item b { color: var(--text-main); }
        .detail-item.total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #444;
            font-size: 1.1rem;
        }

        .price-val {
            font-family: 'Orbitron';
            font-size: 3rem;
            color: #fff;
            display: block;
            text-align: center;
            text-shadow: 0 0 15px var(--primary-glow);
        }

        .btn-checkout {
            background: var(--primary);
            color: #000;
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 10px;
            font-family: 'Orbitron';
            font-weight: 900;
            cursor: pointer;
            text-transform: uppercase;
            margin-bottom: 10px;
            transition: 0.3s;
        }
        .btn-checkout:hover { background: #e5a227; transform: scale(1.02); }

        /* Floating Buttons */
        #discord-fab { position: fixed; left: 24px; bottom: 24px; z-index: 100; background: #5865F2; color: #000000; padding: 12px 20px; border-radius: 50px; text-decoration: none; font-family: 'Orbitron'; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; }
        #wa-chat-fab { position: fixed; right: 24px; bottom: 24px; z-index: 100; background: #25d366; color: #000000; padding: 12px 20px; border-radius: 50px; text-decoration: none; font-family: 'Orbitron'; font-size: 0.9rem; display: flex; align-items: center; gap: 8px; }

        .safe-bar { background: rgba(255, 181, 44, 0.05); border-left: 4px solid var(--primary); padding: 12px; border-radius: 4px; margin-top: 15px; font-size: 0.8rem; display: flex; gap: 10px; align-items: center; }
        .eta-box { color: #f1c40f; font-size: 0.9rem; font-weight: bold; margin-top: 20px; border: 1px dashed #f1c40f66; padding: 10px; border-radius: 8px; text-align: center; }
        .role-notice { color: #ff4444; font-size: 0.75rem; margin-top: 5px; display: none; font-weight: bold; }
    </style>
</head>
<body class="bg-wow_retail">

<header>
    <div class="header-container">
        <div class="logo">PBOOST</div>
        <div class="search-container">
           <i class="fas fa-search search-icon"></i>
           <input type="text" id="service-search" placeholder="Search (e.g. M+, Leveling, Gold...)" onkeyup="filterServices()" autocomplete="off">
           <div id="search-results" style="position: absolute; width: 100%; background: #18191b; border: 1px solid #333; border-radius: 0 0 8px 8px; z-index: 1000; max-height: 300px; overflow-y: auto; display: none;"></div>
        </div>
    </div>
</header>

<div class="game-nav">
    <div id="tab-wow_retail" class="game-card" onclick="switchTab('wow_retail')">WOW RETAIL</div>
    <div id="tab-wow_classic" class="game-card" onclick="switchTab('wow_classic')">WOW CLASSIC</div>
    <div id="tab-wow_tbc" class="game-card" onclick="switchTab('wow_tbc')">WOW TBC ANNIV.</div>
    <div id="tab-wow_mop" class="game-card" onclick="switchTab('wow_mop')">WOW MoP</div>
    <div id="tab-fell" class="game-card" onclick="switchTab('fell')">FELLOWSHIP</div>
    <div id="tab-poe2" class="game-card" onclick="switchTab('poe2')">PATH OF EXILE 2</div>
    <div id="tab-bf6" class="game-card" onclick="switchTab('bf6')">BATTLEFIELD 6</div>
</div>

<div class="main-container">
    <div class="config-side">
        <div class="config-card">
            <h2><i class="fas fa-sliders-h"></i> CONFIGURATION</h2>

            <div id="form-wow_retail">
                <div class="input-group">
                    <label>Service</label>
                    <select id="wow_retail_service" onchange="updateWoWRetailServiceUI()">
                        <option value="mplus">Mythic+ Carry</option>
                        <option value="mplus_bundle">Mythic+ Bundle (3+1 FREE)</option>
                        <option value="ksm">Keystone Master (2000 IO)</option>
                        <option value="keystone_hero">Keystone Hero (2500 IO + Portals)</option>
                        <option value="keystone_legend">Keystone Legend (3000 IO)</option>
                        <option value="title_01">Top 0.1% Regional Title</option>
                        <option value="mounts">Rare Mounts Farm</option>
                        <option value="leveling">Leveling 1-80</option>
                        <option value="pvp_rating">PvP Arena Rating (1-2400)</option>
                        <option value="coaching">Professional Coaching</option>
                        <option value="rent_boost">Rent a Pro (Hourly)</option>
                        <option value="gold">Gold Selling (per 1k)</option>
                    </select>
                </div>
                <div id="wow-retail-service-extra"></div>
                <label>Service Mode</label>
                <div class="mode-selector">
                    <div id="wow-retail-mode-selfplay" class="mode-btn active" onclick="setMode('Self-play')">SELF-PLAY</div>
                    <div id="wow-retail-mode-piloted" class="mode-btn" onclick="setMode('Piloted')">PILOTED (+15%)</div>
                </div>
            </div>

            <div id="form-wow_classic" style="display:none;">
                <div class="input-group">
                    <label>Classic Service</label>
                    <select id="wow_classic_service" onchange="updateWoWClassicServiceUI()">
                        <option value="leveling">Classic Leveling</option>
                        <option value="gold">Classic Gold</option>
                        <option value="raid">Classic Raid Carry</option>
                    </select>
                </div>
                <div id="wow-classic-service-extra"></div>
                <label>Service Mode</label>
                <div class="mode-selector">
                    <div id="wow-classic-mode-selfplay" class="mode-btn active" onclick="setMode('Self-play')">SELF-PLAY</div>
                    <div id="wow-classic-mode-piloted" class="mode-btn" onclick="setMode('Piloted')">PILOTED (+15%)</div>
                </div>
            </div>

            <div id="form-wow_tbc" style="display:none;">
                <div class="input-group">
                    <label>TBC Anniversary Service (Pre-order)</label>
                    <select id="wow_tbc_service" onchange="updateWoWTBCServiceUI()">
                        <option value="leveling">TBC Power Leveling (1-70)</option>
                        <option value="professions">TBC Professions (1-375)</option>
                        <option value="riding">TBC Riding & Flying</option>
                    </select>
                </div>
                <div id="wow-tbc-service-extra"></div>
                <label>Service Mode</label>
                <div class="mode-selector">
                    <div id="wow-tbc-mode-selfplay" class="mode-btn active" onclick="setMode('Self-play')">SELF-PLAY</div>
                    <div id="wow-tbc-mode-piloted" class="mode-btn" onclick="setMode('Piloted')">PILOTED (+15%)</div>
                </div>
            </div>

            <div id="form-wow_mop" style="display:none;">
                <div class="input-group">
                    <label>MoP Service</label>
                    <select id="wow_mop_service" onchange="updateWoWMoPUI()">
                        <option value="leveling">Power Leveling (1-90)</option>
                        <option value="professions">Professions Boost</option>
                        <option value="ilvl">Item Level Farm</option>
                        <option value="dungeons">Dungeon / Scenarios</option>
                        <option value="challenges">Challenge Mode (Gold)</option>
                    </select>
                </div>
                <div id="wow-mop-service-extra"></div>
                <label>Service Mode</label>
                <div class="mode-selector">
                    <div id="mop-mode-selfplay" class="mode-btn active" onclick="setMode('Self-play')">SELF-PLAY</div>
                    <div id="mop-mode-piloted" class="mode-btn" onclick="setMode('Piloted')">PILOTED (+15%)</div>
                </div>
            </div>

            <div id="form-fell" style="display:none;">
                <div class="input-group">
                    <label>Hero Selection</label>
                    <select id="hero_select" onchange="calcTotal()">
                        <option value="none">Ardeos (DPS)</option>
                        <option value="none">Tariq (DPS)</option>
                        <option value="none">Amara (DPS)</option>
                        <option value="none">Runa (DPS)</option>
                        <option value="none">Sylas (DPS)</option>

                        <option value="fee">Helena (Tank) +30% fee</option>
                        <option value="fee">Gideon (Tank) +30% fee</option>
                        <option value="fee">Bryn (Tank) +30% fee</option>

                        <option value="fee">Sylvie (Healer) +30% fee</option>
                        <option value="fee">Ana (Healer) +30% fee</option>
                        <option value="fee">Xavier (Healer) +30% fee</option>
                    </select>
                    <div id="role_fee_notice" class="role-notice">* A 30% role fee is applied ONLY to Tanks and Heals.</div>
                </div>
                <div class="input-group">
                    <label>Boosting Category</label>
                    <select id="fell_type" onchange="updateFellUI()">
                    <option value="gear_score">Gear Score Farming</option>
                    <option value="capstone">Dungeon Runs / Carries</option>
                    <option value="rating">Hero Dungeon Rating</option>
                    <option value="bis">BIS Gear Full Farm</option>
                    <option value="bundles">Value Bundles</option>
                    </select>
                </div>
                <div id="dynamic_fell"></div>
                <label>Service Mode</label>
                <div class="mode-selector">
                    <div id="fell-mode-selfplay" class="mode-btn active" onclick="setMode('Self-play')">SELF-PLAY</div>
                    <div id="fell-mode-piloted" class="mode-btn" onclick="setMode('Piloted')">PILOTED (+15%)</div>
                </div>
            </div>

                <div id="form-poe2" style="display:none;">
                <div class="input-group">
                    <label>PoE 2 Service</label>
                    <select id="poe2_type" onchange="updatePoe2UI()">
                        <option value="leveling">Power Leveling</option>
                        <option value="currency">Currency Farming (Orbs)</option>
                        <option value="campaign">Campaign Boost</option>
                        <option value="trials">Ascendancy Trials</option>
                        <option value="builds">Complete Builds</option>
                    </select>
                </div>
                <div id="dynamic_poe2"></div>
                <label>Service Mode</label>
                <div class="mode-selector">
                    <div id="poe-mode-selfplay" class="mode-btn active" onclick="setMode('Self-play')">SELF-PLAY</div>
                    <div id="poe-mode-piloted" class="mode-btn" onclick="setMode('Piloted')">PILOTED (+15%)</div>
                </div>
            </div>

            <div id="form-bf6" style="display:none;">
                <div class="input-group">
                    <label>Selected Service</label>
                    <select id="bf_service" onchange="calcTotal()">
                        <option value="leveling">Account Power Leveling (1-500)</option>
                        <option value="battlepass">Battle Pass Tier Progression</option>
                    </select>
                </div>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div><label>Current Level</label><input type="number" id="bf_from" value="1" oninput="calcTotal()"></div>
                    <div><label>Target Level</label><input type="number" id="bf_to" value="50" oninput="calcTotal()"></div>
                </div>
            </div>

            <div class="safe-bar"><i class="fas fa-shield-alt"></i> Safe & Secure: 100% Hand-made. VPN included on Piloted.</div>
            <div class="eta-box"><i class="fas fa-bolt"></i> DELIVERY: <span id="display_eta">...</span></div>
        </div>
    </div>

    <div class="summary-side">
        <div class="summary-card">
            <h2 style="border:none; text-align:center; padding:0; margin-bottom:10px;">YOUR ORDER</h2>
            <div class="order-details" id="checkout-details">
                <div class="detail-item"><span>Game:</span> <b id="detail-game">-</b></div>
                <div class="detail-item"><span>Service:</span> <b id="detail-service">-</b></div>
                <div class="detail-item"><span>Mode:</span> <b id="detail-mode">-</b></div>
                <div class="detail-item"><span>Extra:</span> <b id="detail-extra">None</b></div>
                <div class="detail-item total"><span>Final Price:</span> <b id="detail-price">$0.00</b></div>
            </div>
            <div class="price-val">$<span id="display_price">0.00</span></div>

            <div class="input-group" style="margin-top:20px;">
                <label>Promo Code</label>
                <div style="display:flex; gap:8px;"><input type="text" id="coupon_input" placeholder="CODE"><button onclick="applyCoupon()" style="background:#333; color:white; border:none; border-radius:8px; cursor:pointer; font-family:Orbitron; padding: 0 15px;">OK</button></div>
            </div>

            <div style="font-size:0.8rem; margin-top:20px; display:flex; align-items:center; gap:10px;">
                <input type="checkbox" id="opt_express" onchange="calcTotal()" style="width:20px;">
                <span>EXPRESS START (+20%)</span>
            </div>
            <button class="btn-checkout" onclick="sendOrder()" style="margin-top:20px;">Confirm with Support</button>
            <div class="paypal-box">
                <form action="https://www.paypal.com/ncp/payment/FR89NJWW4YZZC" method="post" target="_blank" style="display:inline-grid;justify-items:center;width:100%;">
                    <input type="submit" value="Pay with PayPal" style="background: #FFD140; border:none; padding:12px 30px; border-radius:10px; font-weight:900; cursor:pointer; width:100%; font-size:1.1rem; margin-bottom:5px; font-family:'Orbitron'; color: #000; text-transform: uppercase;"/>
                    <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="cards" style="height:20px;"/>
                </form>
            </div>
        </div>
    </div>
</div>

<a href="https://discord.gg/8zkvN4qNfq" id="discord-fab" target="_blank"><i class="fab fa-discord"></i> Discord</a>
<a href="https://wa.me/584125151298" id="wa-chat-fab" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>

<script>
// --- IMG SECTION --- //
const IMAGES_CONFIG = {
    backgrounds: {
        wow: "img/bg-wow.jpg",
        wowc: "img/wow-classic.jpg",
        wowtbc: "img/bg-wowtbc.jpg",
        wowmop: "img/bg-wowmop.jpg",
        fell: "img/bg-fell.jpg",
        poe2: "img/bg-poe2.jpg",
        bf6: "img/bg-bf6.jpg"
    },
    nav_cards: {
        wow_retail: "img/wow.jpg",
        wow_classic: "img/wow-classic.jpg",
        wow_tbc: "img/wow-tbc.jpg",
        wow_mop: "img/wow-mop.jpg",
        fell: "img/fell.jpg",
        poe2: "img/poe2.jpg",
        bf6: "img/bf6.jpg"
    }
};
// --- PRICE SECTION --- //
const PRICES_CONFIG = {
    wow_retail: {
        mplus: { 7: 2.5, 8: 3, 9: 3.5, 10: 5, 11: 6, 12: 7, 13: 10, 14: 13, 15: 16 },
        mplus_bundle: { 7: 7.50, 8: 9.00, 9: 10.50, 10: 15.00, 11: 18.00, 12: 21.00, 13: 30.00, 14: 39.00, 15: 48.00 },
        ksm: 25,
        keystone_hero: 110,
        keystone_legend: 245,
        title_01: 590,
        mounts: { beledar: 35, mithrios: 185, ivory: 45, renewed: 60 },
        leveling_per_lvl: 0.45,
        pvp_per_rating: 0.25,
        coaching_hr: 25,
        rent_hr: 18,
        gold_per_k: 0.055
    },
    wow_classic: {
        leveling_per_lvl: 1.2,
        gold_unit: 0.12,
        raids: { mc: 45, bwl: 65 }
    },
    wow_tbc: {
        leveling_per_lvl: 1.85,
        professions_prices: { jewelcrafting: 45.00, leatherworking: 38.00, alchemy: 29.00, enchanting: 42.00, gathering: 22.00 },
        riding_prices: { expert_riding: 35.00, artisan_flying: 185.00 }
    },
    wow_mop: {
        // Precios graduales basados en mercado para Leveling 1-90
        leveling: { low: 0.80, mid: 1.50, high: 2.50 },
        professions: { primary: 35.00, secondary: 15.00 },
        ilvl_farm: { 463: 45.00, 476: 85.00, 496: 150.00 },
        dungeons: { hc_run: 5.00, scenario: 3.00 },
        challenges: { full_9_9_gold: 180.00, single_run: 25.00 }
    },
    fell: {
        gear_score: 0.48,
        dungeons: { cithrel: 2.89, tuzari: 3.71, molten_forge: 4.50, abyssal_depths: 5.00 },
        bundles: { raid_ready: 120.00, full_bis_starter: 250.00 },
        bis: 341.53,
        rating_per_point: 0.024,
        role_fee_multiplier: 1.3
    },
    poe2: {
        leveling: { "1-60": 39.99, "60-80": 45.00, "1-90": 115.00 },
        campaign: { "acts_1_4": 25.00, "full_campaign": 49.00 },
        currency: { divine_orb: 0.15, exalted_orb: 0.05 },
        trials: { all_8_points: 15.00, trial_of_chaos: 8.00 },
        builds: { starter: 89.00, endgame: 199.00 }
    },
    bf6: { lvl_low: 1.45, lvl_high: 3.10, battlepass_per_tier: 3.09 },
    global: {
        piloted_fee: 1.15,
        express_fee: 1.20,
        coupon_discount: 0.9,
        coupon_code: "PBOOST1454"
    }
};

let currentTab = 'wow_retail';
let discount = 1.0;
let serviceMode = 'Self-play';

function initImages() {
    const root = document.documentElement;
    root.style.setProperty('--bg-img-wow', `url('${IMAGES_CONFIG.backgrounds.wow}')`);
    root.style.setProperty('--bg-img-wowc', `url('${IMAGES_CONFIG.backgrounds.wowc}')`);
    root.style.setProperty('--bg-img-wowtbc', `url('${IMAGES_CONFIG.backgrounds.wowtbc}')`);
    root.style.setProperty('--bg-img-wowmop', `url('${IMAGES_CONFIG.backgrounds.wowmop}')`);
    root.style.setProperty('--bg-img-fell', `url('${IMAGES_CONFIG.backgrounds.fell}')`);
    root.style.setProperty('--bg-img-poe2', `url('${IMAGES_CONFIG.backgrounds.poe2}')`);
    root.style.setProperty('--bg-img-bf6', `url('${IMAGES_CONFIG.backgrounds.bf6}')`);

    document.getElementById('tab-wow_retail').style.backgroundImage = `url('${IMAGES_CONFIG.nav_cards.wow_retail}')`;
    document.getElementById('tab-wow_classic').style.backgroundImage = `url('${IMAGES_CONFIG.nav_cards.wow_classic}')`;
    document.getElementById('tab-wow_tbc').style.backgroundImage = `url('${IMAGES_CONFIG.nav_cards.wow_tbc}')`;
    document.getElementById('tab-wow_mop').style.backgroundImage = `url('${IMAGES_CONFIG.nav_cards.wow_mop}')`;
    document.getElementById('tab-fell').style.backgroundImage = `url('${IMAGES_CONFIG.nav_cards.fell}')`;
    document.getElementById('tab-poe2').style.backgroundImage = `url('${IMAGES_CONFIG.nav_cards.poe2}')`;
    document.getElementById('tab-bf6').style.backgroundImage = `url('${IMAGES_CONFIG.nav_cards.bf6}')`;
}

function switchTab(tab) {
    currentTab = tab;
    ['wow_retail', 'wow_classic', 'wow_tbc', 'wow_mop', 'fell', 'poe2', 'bf6'].forEach(t => {
        const tabEl = document.getElementById(`tab-${t}`);
        const formEl = document.getElementById(`form-${t}`);
        if(tabEl) tabEl.classList.toggle('active', t === tab);
        if(formEl) formEl.style.display = (t === tab) ? 'block' : 'none';
    });
    document.body.className = `bg-${tab}`;
    if(tab === 'wow_retail') updateWoWRetailServiceUI();
    else if(tab === 'wow_classic') updateWoWClassicServiceUI();
    else if(tab === 'wow_tbc') updateWoWTBCServiceUI();
    else if(tab === 'fell') updateFellUI();
    else if(tab === 'poe2') updatePoe2UI();
    calcTotal();
}

function setMode(mode) {
    serviceMode = mode;
    ['wow-retail', 'wow-classic', 'wow-tbc', 'wow_mop', 'fell', 'poe'].forEach(p => {
        const pBtn = document.getElementById(`${p}-mode-piloted`);
        const sBtn = document.getElementById(`${p}-mode-selfplay`);
        if(pBtn) pBtn.classList.toggle('active', mode === 'Piloted');
        if(sBtn) sBtn.classList.toggle('active', mode === 'Self-play');
    });
    calcTotal();
}

function updateWoWRetailServiceUI() {
    const s = document.getElementById('wow_retail_service').value;
    const cfg = PRICES_CONFIG.wow_retail;
    let html = '';
    if(s === 'mplus') {
        html = `<label>Level</label><select id="wow_mplus_level" onchange="calcTotal()">${Object.keys(cfg.mplus).map(l => `<option value="${l}">+${l}</option>`)}</select><label>Runs</label><input type="number" id="wow_mplus_runs" min="1" value="1" oninput="calcTotal()">`;
    } else if(s === 'mplus_bundle') {
        html = `<label>Bundle</label><select id="wow_bundle_level" onchange="calcTotal()">${Object.keys(cfg.mplus_bundle).map(l => `<option value="${l}">+${l} Bundle (3+1)</option>`)}</select>`;
    } else if(s === 'mounts') {
        html = `<label>Mount</label><select id="wow_mount_select" onchange="calcTotal()">${Object.keys(cfg.mounts).map(m => `<option value="${m}">${m}</option>`)}</select>`;
    } else if(s === 'leveling') {
        html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div><label>From</label><input type="number" id="wow_lev_from" value="1" oninput="calcTotal()"></div><div><label>To</label><input type="number" id="wow_lev_to" value="80" oninput="calcTotal()"></div></div>`;
    } else if(s === 'pvp_rating') {
        html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div><label>Current</label><input type="number" id="pvp_from" value="0" oninput="calcTotal()"></div><div><label>Target</label><input type="number" id="pvp_to" value="1400" oninput="calcTotal()"></div></div>`;
    } else if(s === 'coaching' || s === 'rent_boost') {
        html = `<label>Hours</label><input type="number" id="wow_hours" value="1" min="1" oninput="calcTotal()">`;
    } else if(s === 'gold') {
        html = `<label>Gold (k)</label><input type="number" id="wow_gold_k" min="1" value="100" oninput="calcTotal()">`;
    }
    document.getElementById('wow-retail-service-extra').innerHTML = html;
    calcTotal();
}

function updateWoWClassicServiceUI() {
    const s = document.getElementById('wow_classic_service').value;
    let html = '';
    if(s === 'leveling') html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div><label>From</label><input type="number" id="classic_from" value="1" oninput="calcTotal()"></div><div><label>To</label><input type="number" id="classic_to" value="60" oninput="calcTotal()"></div></div>`;
    else if(s === 'gold') html = `<label>Amount</label><input type="number" id="classic_gold" value="100" oninput="calcTotal()">`;
    else if(s === 'raid') html = `<label>Raid</label><select id="classic_raid" onchange="calcTotal()"><option value="mc">Molten Core</option><option value="bwl">Blackwing Lair</option></select>`;
    document.getElementById('wow-classic-service-extra').innerHTML = html;
    calcTotal();
}

function updateWoWMoPUI() {
    const s = document.getElementById('wow_mop_service').value;
    let html = '';
    if(s === 'leveling') {
        html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div><label>From</label><input type="number" id="mop_from" value="1" oninput="calcTotal()"></div><div><label>To</label><input type="number" id="mop_to" value="90" oninput="calcTotal()"></div></div>`;
    } else if(s === 'professions') {
        html = `<label>Type</label><select id="mop_prof_type" onchange="calcTotal()"><option value="primary">Main Profession (1-600)</option><option value="secondary">Secondary Profession</option></select>`;
    } else if(s === 'ilvl') {
        html = `<label>Target Average ilvl</label><select id="mop_ilvl_target" onchange="calcTotal()"><option value="463">463 ilvl (Heroic Ready)</option><option value="476">476 ilvl (LFR Ready)</option><option value="496">496 ilvl (T14 BiS)</option></select>`;
    } else if(s === 'dungeons') {
        html = `<label>Activity</label><select id="mop_dung_type" onchange="calcTotal()"><option value="hc_run">Heroic Dungeon Run</option><option value="scenario">Scenario Completion</option></select>`;
    } else if(s === 'challenges') {
        html = `<label>Medal Rank</label><select id="mop_chal_type" onchange="calcTotal()"><option value="full_9_9_gold">9/9 Gold (Full Set/Mount)</option><option value="single_run">Single Dungeon Gold</option></select>`;
    }
    document.getElementById('wow-mop-service-extra').innerHTML = html;
    calcTotal();
}

function updateWoWTBCServiceUI() {
    const s = document.getElementById('wow_tbc_service').value;
    let html = '';
    if(s === 'leveling') html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div><label>From</label><input type="number" id="tbc_from" value="1" oninput="calcTotal()"></div><div><label>To</label><input type="number" id="tbc_to" value="70" oninput="calcTotal()"></div></div>`;
    else if(s === 'professions') html = `<label>Profession (1-375)</label><select id="tbc_prof" onchange="calcTotal()"><option value="jewelcrafting">Jewelcrafting</option><option value="leatherworking">Leatherworking</option><option value="alchemy">Alchemy</option><option value="enchanting">Enchanting</option><option value="gathering">Gathering</option></select>`;
    else if(s === 'riding') html = `<label>Riding/Flying</label><select id="tbc_riding" onchange="calcTotal()"><option value="expert_riding">Expert (150%)</option><option value="artisan_flying">Artisan (280%)</option></select>`;
    document.getElementById('wow-tbc-service-extra').innerHTML = html;
    calcTotal();
}

function updateFellUI() {
    const type = document.getElementById('fell_type').value;
    const div = document.getElementById('dynamic_fell');
    let html = '';

    if (type === 'leveling') {
        html = `<label>Leveling Range</label><select id="fell_lev_range" onchange="calcTotal()">
                    <option value="1-20">Full Leveling (1-20)</option>
                    <option value="1-10">Starter (1-10)</option>
                    <option value="10-20">Endgame Push (10-20)</option>
                </select>`;
    } else if (type === 'gear_score') {
        html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <div><label>Current GS</label><input type="number" id="gs_from" value="0" oninput="calcTotal()"></div>
                    <div><label>Target GS</label><input type="number" id="gs_to" value="330" oninput="calcTotal()"></div>
                </div>`;
    } else if (type === 'capstone') {
        html = `<label>Dungeon</label><select id="cap_rank" onchange="calcTotal()">
                    <option value="cithrel">Cithrel's Fall</option>
                    <option value="tuzari">Heart of Tuzari</option>
                    <option value="molten_forge">Molten Forge</option>
                    <option value="abyssal_depths">Abyssal Depths</option>
                </select>`;
    } else if (type === 'bundles') {
        html = `<label>Select Bundle</label><select id="fell_bundle" onchange="calcTotal()">
                    <option value="raid_ready">Raid Ready Bundle</option>
                    <option value="full_bis_starter">Full BIS Starter Pack</option>
                </select>`;
    } else {
        html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <div><label>From</label><input type="number" id="f_from" value="0" oninput="calcTotal()"></div>
                    <div><label>To</label><input type="number" id="f_to" value="330" oninput="calcTotal()"></div>
                </div>`;
    }
    div.innerHTML = html;
    calcTotal();
}

function updatePoe2UI() {
    const type = document.getElementById('poe2_type').value;
    const div = document.getElementById('dynamic_poe2');
    let html = '';

    if (type === 'leveling') {
        html = `<label>Leveling Range</label><select id="poe2_lev_range" onchange="calcTotal()">
                    <option value="1-60">Starter Leveling (1-60)</option>
                    <option value="60-80">Mid-game Push (60-80)</option>
                    <option value="1-90">Endgame Ready (1-90)</option>
                </select>`;
    } else if (type === 'currency') {
        html = `<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                    <div><label>Orb Type</label><select id="poe2_orb_type" onchange="calcTotal()">
                        <option value="divine_orb">Divine Orb</option>
                        <option value="exalted_orb">Exalted Orb</option>
                    </select></div>
                    <div><label>Amount</label><input type="number" id="poe2_orb_qty" value="10" min="10" oninput="calcTotal()"></div>
                </div>`;
    } else if (type === 'campaign') {
        html = `<label>Scope</label><select id="poe2_camp_scope" onchange="calcTotal()">
                    <option value="acts_1_4">Acts 1 to 4</option>
                    <option value="full_campaign">Full Campaign Completion</option>
                </select>`;
    } else if (type === 'trials') {
        html = `<label>Trial Service</label><select id="poe2_trial_type" onchange="calcTotal()">
                    <option value="all_8_points">All 8 Ascendancy Points</option>
                    <option value="trial_of_chaos">Trial of Chaos Completion</option>
                </select>`;
    } else if (type === 'builds') {
        html = `<label>Build Tier</label><select id="poe2_build_tier" onchange="calcTotal()">
                    <option value="starter">Starter Build (Maps Ready)</option>
                    <option value="endgame">Endgame Build (Boss Killer)</option>
                </select>`;
    }
    div.innerHTML = html;
    calcTotal();
}

function applyCoupon() {
    if(document.getElementById('coupon_input').value.toUpperCase() === PRICES_CONFIG.global.coupon_code) {
        discount = PRICES_CONFIG.global.coupon_discount; alert("Discount Applied");
    }
    calcTotal();
}

function calcTotal() {
    let base = 0; let eta = "..."; let serviceName = "";

    if (currentTab === 'wow_retail') {
        const cfg = PRICES_CONFIG.wow_retail;
        const s = document.getElementById('wow_retail_service').value;
        serviceName = document.getElementById('wow_retail_service').options[document.getElementById('wow_retail_service').selectedIndex].text;
        if(s === "mplus") { base = (cfg.mplus[document.getElementById('wow_mplus_level')?.value] || 0) * (document.getElementById('wow_mplus_runs')?.value || 1); eta = "1-3h"; }
        else if(s === "mplus_bundle") { base = cfg.mplus_bundle[document.getElementById('wow_bundle_level')?.value] || 0; eta = "4-6h"; }
        else if(s === "leveling") { base = (document.getElementById('wow_lev_to').value - document.getElementById('wow_lev_from').value) * cfg.leveling_per_lvl; eta = "1-2d"; }
        else if(s === "pvp_rating") { base = (document.getElementById('pvp_to').value - document.getElementById('pvp_from').value) * cfg.pvp_per_rating; eta = "2-5d"; }
        else if(s === "coaching") { base = (document.getElementById('wow_hours').value || 1) * cfg.coaching_hr; eta = "Instant"; }
        else if(s === "rent_boost") { base = (document.getElementById('wow_hours').value || 1) * cfg.rent_hr; eta = "Instant"; }
        else if(s === "gold") { base = (document.getElementById('wow_gold_k').value || 0) * cfg.gold_per_k; eta = "15m"; }
        else { base = cfg[s] || 0; eta = "1-3d"; }
    }
    else if (currentTab === 'wow_classic') {
        const cfg = PRICES_CONFIG.wow_classic;
        const s = document.getElementById('wow_classic_service').value;
        serviceName = "Classic " + document.getElementById('wow_classic_service').options[document.getElementById('wow_classic_service').selectedIndex].text;
        if(s === "leveling") { base = (document.getElementById('classic_to').value - document.getElementById('classic_from').value) * cfg.leveling_per_lvl; eta = "3-10d"; }
        else if(s === "gold") { base = (document.getElementById('classic_gold').value || 0) * cfg.gold_unit; eta = "30m"; }
        else if(s === "raid") { base = cfg.raids[document.getElementById('classic_raid').value] || 0; eta = "Sched"; }
    }
    else if (currentTab === 'wow_mop') {
        const cfg = PRICES_CONFIG.wow_mop;
        const s = document.getElementById('wow_mop_service').value;
        serviceName = "MoP " + document.getElementById('wow_mop_service').options[document.getElementById('wow_mop_service').selectedIndex].text;

        if(s === "leveling") {
            let f = parseInt(document.getElementById('mop_from').value) || 0;
            let t = parseInt(document.getElementById('mop_to').value) || 0;
            for (let i = f; i < t; i++) {
                if (i < 80) base += cfg.leveling.low;
                else if (i < 85) base += cfg.leveling.mid;
                else base += cfg.leveling.high;
            }
            eta = "2-5d";
        } else if(s === "professions") {
            base = cfg.professions[document.getElementById('mop_prof_type').value];
            eta = "1-2d";
        } else if(s === "ilvl") {
            base = cfg.ilvl_farm[document.getElementById('mop_ilvl_target').value];
            eta = "3-4d";
        } else if(s === "dungeons") {
            base = cfg.dungeons[document.getElementById('mop_dung_type').value];
            eta = "1h";
        } else if(s === "challenges") {
            base = cfg.challenges[document.getElementById('mop_chal_type').value];
            eta = "4-8h";
        }
    }
    else if (currentTab === 'wow_tbc') {
        const cfg = PRICES_CONFIG.wow_tbc;
        const s = document.getElementById('wow_tbc_service').value;
        serviceName = "TBC " + document.getElementById('wow_tbc_service').options[document.getElementById('wow_tbc_service').selectedIndex].text;
        if(s === "leveling") { base = (document.getElementById('tbc_to').value - document.getElementById('tbc_from').value) * cfg.leveling_per_lvl; eta = "10-14d"; }
        else if(s === "professions") { base = cfg.professions_prices[document.getElementById('tbc_prof').value] || 0; eta = "3-4d"; }
        else if(s === "riding") { base = cfg.riding_prices[document.getElementById('tbc_riding').value] || 0; eta = "2-3d"; }
    }
    else if (currentTab === 'fell') {
        const cfg = PRICES_CONFIG.fell;
        const type = document.getElementById('fell_type').value;
        serviceName = document.getElementById('fell_type').options[document.getElementById('fell_type').selectedIndex].text;

        // 1. Cálculo del precio base por servicio
        if (type === "leveling") {
            base = cfg.leveling[document.getElementById('fell_lev_range')?.value] || 0;
        } else if (type === "gear_score") {
            let f = parseInt(document.getElementById('gs_from')?.value) || 0;
            let t = parseInt(document.getElementById('gs_to')?.value) || 0;
            base = Math.max(0, t - f) * cfg.gear_score;
        } else if (type === "capstone") {
            base = cfg.dungeons[document.getElementById('cap_rank')?.value] || 0;
        } else if (type === "bundles") {
            base = cfg.bundles[document.getElementById('fell_bundle')?.value] || 0;
        } else if (type === "bis") {
            base = cfg.bis;
        } else {
            let f = parseInt(document.getElementById('f_from')?.value) || 0;
            let t = parseInt(document.getElementById('f_to')?.value) || 0;
            base = Math.max(0, t - f) * cfg.rating_per_point;
        }

        // 2. APLICACIÓN DEL RECARGO DEL 30% (Corregido: ahora aplica a TODO Fellowship)
        const heroValue = document.getElementById('hero_select').value;
        const notice = document.getElementById('role_fee_notice');

        if (heroValue === "fee") {
            base *= cfg.role_fee_multiplier; // Multiplica por 1.3
            if (notice) notice.style.display = 'block';
        } else {
            if (notice) notice.style.display = 'none';
        }

        eta = "Varies";
    }
    else if (currentTab === 'poe2') {
        const cfg = PRICES_CONFIG.poe2;
        const type = document.getElementById('poe2_type').value;
        serviceName = document.getElementById('poe2_type').options[document.getElementById('poe2_type').selectedIndex].text;

        if (type === "leveling") {
            base = cfg.leveling[document.getElementById('poe2_lev_range').value];
            eta = "1-3d";
        } else if (type === "currency") {
            let qty = parseInt(document.getElementById('poe2_orb_qty').value) || 0;
            base = qty * cfg.currency[document.getElementById('poe2_orb_type').value];
            eta = "15-60m";
        } else if (type === "campaign") {
            base = cfg.campaign[document.getElementById('poe2_camp_scope').value];
            eta = "12-24h";
        } else if (type === "trials") {
            base = cfg.trials[document.getElementById('poe2_trial_type').value];
            eta = "2-4h";
        } else if (type === "builds") {
            base = cfg.builds[document.getElementById('poe2_build_tier').value];
            eta = "3-5d";
        }
    }
    else if (currentTab === 'bf6') {
        const cfg = PRICES_CONFIG.bf6;
        let f = parseInt(document.getElementById('bf_from').value) || 0;
        let t = parseInt(document.getElementById('bf_to').value) || 0;
        serviceName = document.getElementById('bf_service').options[document.getElementById('bf_service').selectedIndex].text;
        if (document.getElementById('bf_service').value === "leveling") {
            for (let i = f; i < t; i++) base += (i < 50) ? cfg.lvl_low : cfg.lvl_high;
            eta = "3-5d";
        } else { base = (t-f) * cfg.battlepass_per_tier; eta = "5-7d"; }
    }

    if (serviceMode === 'Piloted') base *= PRICES_CONFIG.global.piloted_fee;
    if (document.getElementById('opt_express').checked) base *= PRICES_CONFIG.global.express_fee;

    let final = (base * discount).toFixed(2);
    document.getElementById('display_price').innerText = final;
    document.getElementById('display_eta').innerText = eta;
    document.getElementById('detail-game').innerText = currentTab.toUpperCase();
    document.getElementById('detail-service').innerText = serviceName;
    document.getElementById('detail-mode').innerText = serviceMode;
    document.getElementById('detail-price').innerText = "$" + final;
}

function sendOrder() {
    const price = document.getElementById('display_price').innerText;
    window.open(`https://t.me/ErnismarSF?text=New Order: ${currentTab.toUpperCase()} - $${price}`);
}
function filterServices() {
    const input = document.getElementById('service-search').value.toLowerCase();
    const resultsDiv = document.getElementById('search-results');

    // Diccionario completo de servicios para búsqueda directa
    const services = [
        { name: "Mythic+ Carry", tab: "wow_retail", val: "mplus" },
        { name: "Keystone Master (KSM)", tab: "wow_retail", val: "ksm" },
        { name: "Gold Selling (WoW)", tab: "wow_retail", val: "gold" },
        { name: "Rare Mounts", tab: "wow_retail", val: "mounts" },
        { name: "Classic Leveling", tab: "wow_classic", val: "leveling" },
        { name: "TBC Power Leveling", tab: "wow_tbc", val: "leveling" },
        { name: "MoP Challenge Mode", tab: "wow_mop", val: "challenges" },
        { name: "Gear Score Farm", tab: "fell", val: "gear_score" },
        { name: "PoE 2 Currency (Orbs)", tab: "poe2", val: "currency" },
        { name: "Battlefield Leveling", tab: "bf6", val: "leveling" },
        { name: "Dungeon Carries", tab: "fell", val: "capstone" }
    ];

    if (input.length < 2) {
        resultsDiv.style.display = 'none';
        return;
    }

    const filtered = services.filter(s => s.name.toLowerCase().includes(input));

    if (filtered.length > 0) {
        resultsDiv.innerHTML = filtered.map(s => `
            <div onclick="goToService('${s.tab}', '${s.val}')" style="padding: 10px; cursor: pointer; border-bottom: 1px solid #333; font-size: 0.8rem; color: #eee;">
                <span style="color: var(--primary); font-weight: bold;">[${s.tab.replace('_', ' ').toUpperCase()}]</span> ${s.name}
            </div>
        `).join('');
        resultsDiv.style.display = 'block';
    } else {
        resultsDiv.style.display = 'none';
    }
}

// Función para navegar y seleccionar el servicio
function goToService(tab, serviceVal) {
    switchTab(tab); // Cambia la pestaña del juego

    // Busca el selector específico del juego y cambia su valor
    const selectors = {
        wow_retail: 'wow_retail_service',
        wow_classic: 'wow_classic_service',
        wow_tbc: 'wow_tbc_service',
        wow_mop: 'wow_mop_service',
        fell: 'fell_type',
        poe2: 'poe2_type',
        bf6: 'bf_service'
    };

    const selectorId = selectors[tab];
    const selectEl = document.getElementById(selectorId);

    if (selectEl) {
        selectEl.value = serviceVal;
        // Disparar el evento de cambio manual para que se actualice la UI
        if (tab === 'wow_retail') updateWoWRetailServiceUI();
        else if (tab === 'wow_classic') updateWoWClassicServiceUI();
        else if (tab === 'wow_tbc') updateWoWTBCServiceUI();
        else if (tab === 'wow_mop') updateWoWMoPUI();
        else if (tab === 'fell') updateFellUI();
        else if (tab === 'poe2') updatePoe2UI();
        else calcTotal();
    }

    // Limpiar búsqueda
    document.getElementById('service-search').value = '';
    document.getElementById('search-results').style.display = 'none';
}

// Cerrar resultados si se hace clic fuera
document.addEventListener('click', (e) => {
    if (!e.target.closest('.search-container')) {
        document.getElementById('search-results').style.display = 'none';
    }
});

window.onload = () => { initImages(); switchTab('wow_retail'); };
</script>
</body>
</html>
